{% extends 'baseProyectos.html' %}
{% load static %}
{% block Content %}

<section class="container-poyectos">
    <div class="container" style="margin-top:20px; width:86%;">
        <div class="row">

            <!-- CONTROL PAGES -->
            <div class="col l4 s12 grey lighten-2" style="display:flex; height:35px; align-items:center;">
                <a href="">Principal</a>
                <a class="grey-text pl7">/</a>
                <a class="pl7" href="">Mis Proyectos</a>
                <a class="grey-text pl7">/</a>
                <a class="grey-text pl7"> Detalles del Proyecto</a>
            </div>


            <!-- TITLE -->
            <div class="col s12 ">
                <h3 class="blue-text col l12 s12 text-darken-4">Detalles del Proyecto: {{ proyectos.proyecto_nombre }}
                </h3>
            </div>


            <!-- LEYEND -->
            <div class="col s12">
                <span class="grey-text" style="font-size:14pt;">Información completa acerca del proyecto en curso</span>
            </div>

        </div>
    </div>



    <div class="container" style="margin-top:20px; width:86%;">
        <div class="row">


            <div class="col s12 l12 white pbtm20" style="padding-top: 1cm;">
                <ul class="tabs">
                    <li class="tab col s2.4"><a href="#information_basic" class="active">Información Basica</a></li>
                    <li class="tab col s2.4"><a href="#requirements">Requerimientos</a></li>
                    <li class="tab col s2.4"><a href="#postulated_consultants">Consultores Postulados ({{cPostulados}})</a></li>
                    <li class="tab col s2.4"><a href="#interviews">Entrevistas</a></li>
                    <li class="tab col s2.4"><a href="#consultants_project">Consultores en Proyecto</a></li>

                </ul>
            </div>


            <!-- INFORMACION BASICA -->
            <div class="col s12 l12 white" id="information_basic">


                <!-- TITLE AND CORPORATION -->
                <div class="col s12 l9">
                    <h5 class="black-text text-darken-4" style="font-weight:bold;">{{ proyectos.proyecto_nombre }}</h5>
                    <h6 class="blue-text">{{ empresa.empresa }}</h6>
                </div>


                <!-- STATUS AND DATE -->
                <div class="col s12 l3 right">
                    <p class="grey-text">Estado del Proyecto:
                        {% if proyectos.status == 'No trabajado' %}
                            <div class="chip amber black-text">No se trabajo</div>
                        {% elif proyectos.status == 'Terminado' %}
                            <div class="chip green white-text">Terminado</div>
                        {% else %}
                            <div class="chip blue white-text">Staffing</div>
                        {% endif %}
                    </p>
                    <p class="grey-text">Fecha de Publicación: {{ diasStaffing }}</p>
                </div>


                <!-- TAGS -->

                {% if proyectos.status == 'No trabajado' %}
                <div class="col s12 l12 orange lighten-4 pbtm20">
                    <h5 class="orange lighten-4 amber-text darken-1-text ">¡El proyecto no se puede llevar a cabo! No se
                        cuentan con los recursos suficientes. 😔</h5>
                    <h6 class="orange lighten-4 black-text">Por el momento el proyecto esta en pausa, para poder ser
                        retomado más adelante.</h6>
                </div>

                {% elif proyectos.status == 'Terminado' %}
                <div class="col s12 l12 green lighten-4 pbtm20">
                    <h5 class="green lighten-4 green-text darken-1-text ">¡El proyecto está Terminado! 😁</h5>
                    <h6 class="green lighten-4 black-text">El proyecto se concluyó exitosamente, puede ver los detalles
                        de su proyecto finalizado.</h6>
                </div>
                {% else %}
                {% endif %}


                <!-- WORKING TIME -->
                <div class="col s12 l4 white">
                    <h5>
                        <span class="grey-text">Tiempo de Trabajo</span>
                        <div class="chip blue white-text">{{ proyectos.duracion }}</div>
                    </h5>
                </div>


                <!-- COIN -->
                <div class="col s12 l4 white">
                    <h5>
                        <span class="grey-text">Moneda</span>
                        <div class="chip green white-text">{{ proyectos.id_tipo_moneda.tipo }}</div>
                    </h5>
                </div>


                <!-- CONSULTANTS -->
                <div class="col s12 l4 white">
                    <h5>
                        <span class="grey-text">No. de Consultores</span>
                        <div class="chip blue white-text wid-2cm center"> {{ proyectos.num_consultores }} </div>
                    </h5>
                </div>

                <div class="col s12 l12 white">
                    <h6 class="black-text text-darken-4" style="font-weight:bold;">Descripción general del Proyecto</h6>
                </div>

                <div class="col s12 l12 white pbtm20">
                    <h6 class="black-text">{{ proyectos.description }}</h6>
                </div>

                <div class="col s12 l12 white">
                    <h6 class="black-text text-darken-4" style="font-weight:bold;">Funciones Laborales</h6>
                </div>

                <div class="col s12 l12 white pbtm20">
                    <h6 class="black-text">{{ proyectos.fun_laborales }}</h6>
                </div>

                <!-- BUTTON DETAILS -->
                <div class="col s12 l12 white pbtm20">
                    <button onclick="updateInformation()" class="waves-effect waves-light btn grey darken-4">
                        Editar Información Basica
                    </button>
                </div>
            </div>


            <!-- REQUERIMIENTOS -->
            <div class="col s12 l12 white" id="requirements">

                <div class="aligner" style="margin-left: 1cm; margin-right: 1cm;">

                    <!-- TITLE AND CORPORATION -->
                    <div class="col s12 l9 pbtm20">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Requerimientos de Proyecto</h5>
                        <h6 class="grey-text">Información sobre los recursos y las areas que requiere el proyecto</h6>
                    </div>

                    <!-- HIDDEN CONTENT -->
                    <div class="col s12 white hidden-content" id="content">
                        <div class="row bcw">


                            <div class="input-field col s12 l6">
                                <select>
                                    <option value="1">Controlling</option>
                                    <option value="2">Option 2</option>
                                    <option value="3">Option 3</option>
                                </select>
                                <label>Modulo requerido</label>
                            </div>

                            <div class="input-field col s12 l6">
                                <select>
                                    <option value="1">Órdenes internas</option>
                                    <option value="2">Option 2</option>
                                    <option value="3">Option 3</option>
                                </select>
                                <label>Submódulo requerido</label>
                            </div>

                            <div class="input-field col s12 l6">
                                <select>
                                    <option value="1">k2- De 3 a 5 proyectos, prox de 3 a 5 años</option>
                                    <option value="2">Option 2</option>
                                    <option value="3">Option 3</option>
                                </select>
                                <label>Experiencia Requerida</label>
                            </div>

                            <div class="input-field col s12 l6">
                                <select>
                                    <option value="1">k2- De 3 a 5 proyectos, prox de 3 a 5 años</option>
                                    <option value="2">Option 2</option>
                                    <option value="3">Option 3</option>
                                </select>
                                <label>Experiencia Deseable</label>
                            </div>

                        </div>
                    </div>


                    <!-- ADD REQUIREMENTS BUTTON -->
                    <div class="col s12 white pbtm20">
                        <a class="waves-effect waves-light btn grey darken-4" id="showButtonRequirement">Agregar Requerimiento</a>
                    </div>

                    
                <!-- HIDDEN CONTENT -->
                <div class="col s12  white hidden-content" id="contentTableRequirement" style="margin-left:-20px;">
                    <div class="row bcw">
                        <input type="hidden" id="tablaDatos" name="tablaDatos" value="">
                        <!-- TITLE -->
                        <h5 class="grey-text white black-text" style="margin-top:1cm;">Módulos requeridos para el
                            proyecto</h5>

                        <!-- START TABLE -->
                        <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                            <thead>
                                <tr>
                                    <th>Módulo</th>
                                    <th>Submódulo</th>
                                    <th>Experiencia Requerida</th>
                                    <th>Experiencia Deseada</th>
                                    <th>Editar</th>
                                </tr>
                            </thead>

                            <tbody id="tabla-requerimientos">
                                
                            </tbody>
                            <tfoot>
                                <tr id="sap-form-edit-4">
                                    <td>
                                      <select class="browser-default" name="moduloSAP" id="moduloSAP">
                                        <option value="" disabled selected>Módulo</option>
                                        {% for modulo in listaModulos %}
                                        <option value="{{ modulo.nombre }}">{{ modulo.nombre }}</option>
                                        {% endfor %}
                                      </select>
                                    </td>
                                    <td>
                                      <select class="browser-default" name="submoduloSAP" id="submoduloSAP">
                                        <option value="" disabled selected>Submódulo</option>
                                        {% for submodulos in listaSubodulos %}
                                        <option value="{{ submodulos.nombre }}">{{ submodulos.nombre }}</option>
                                        {% endfor %}
                                      </select>
                                    </td>
                                    <td class="label-experience">
                                      <select class="browser-default" name="nivelRequeridoSAP" id="nivelRequeridoSAP">
                                        <option value="" disabled selected>Nivel</option>
                                        {% for niveles in listaNivelesConocimiento %}
                                        <option value="{{ niveles.nombre }}">{{ niveles.nombre }}</option>
                                        {% endfor %}
                                      </select>
                                    </td>
                                    <td class="label-experience3">
                                        <select class="browser-default" name="nivelDeseadoSAP" id="nivelDeseadoSAP">
                                          <option value="" disabled selected>Nivel</option>
                                          {% for niveles in listaNivelesConocimiento %}
                                          <option value="{{ niveles.nombre }}">{{ niveles.nombre }}</option>
                                          {% endfor %}
                                        </select>
                                      </td>
                                    <td><button class="btn waves-effect waves-light white cyan-text border-cyan" onclick="addRequerimientoSAP(event)">Agregar</button></td>
                                  </tr>
                            </tfoot>
                        </table>
                    </div>
                    <!-- SUBMIT FORM -->
                    <div class="col s12 center white pbtm20">
                        <button class="waves-effect waves-light btn-large grey darken-4 white" id="{{ proyectos.id }}" onclick="addMoreRequirements(this.id)">
                            <i class="material-icons right grey darken-4">arrow_forward</i>
                            Guardar y Continuar
                        </button>
                    </div>
                </div>


                    {% if modulosRequeridos %}
                        <!-- START TABLE -->
                        <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                            <thead>
                                <tr>
                                    <th class="fw-bold">Módulo</th>
                                    <th class="fw-bold">Submódulo</th>
                                    <th class="fw-bold">Experiencia Requerida</th>
                                    <th class="fw-bold">Experiencia Deseada</th>
                                    <th class="fw-bold">Editar</th>
                                    <th class="fw-bold">Eliminar</th>
                                </tr>
                            </thead>

                            <tbody>
                                {% for moduloRequerido in modulosRequeridos %}
                                <tr style="display: none;" id="tr-{{moduloRequerido.id}}">
                                    <form id="sap-form-{{moduloRequerido.id}}" method="POST" action="{% url 'update_requerimientos_project' %}">
                                      {% csrf_token %}
                                      <input type="hidden" name="saber" value="{{moduloRequerido.id}}">
                                      <td>
                                        <select class="browser-default" name="modulo" required>
                                          <option value="" disabled selected>Modulo</option>
                                          {% for modulo in listaModulos %}
                                            <option value='{{modulo.id}}'>{{ modulo.nombre }}</option>
                                          {% endfor %}
                                        </select>
                                      </td>
                                      <td><select class="browser-default" name="submodulo" required>
                                        <option value="" disabled selected>Submódulo</option>
                                        {% for submodulos in listaSubodulos %}
                                          <option value='{{submodulos.id}}'>{{ submodulos.nombre }}</option>
                                        {% endfor %}
                                      </select></td>
                                      <td class="label-experience">
                                        <select class="browser-default" name="nivelRequerido" required>
                                          <option value="" disabled selected>Nivel</option>
                                          {% for niveles in listaNivelesConocimiento %}
                                            <option value='{{niveles.id}}'>{{ niveles.nombre }}</option>
                                          {% endfor %}
                                        </select>
                                      </td>
                                      <td class="label-experience2">
                                        <select class="browser-default" name="nivelDeseado" required>
                                          <option value="" disabled selected>Nivel</option>
                                          {% for niveles in listaNivelesConocimiento %}
                                            <option value='{{niveles.id}}'>{{ niveles.nombre }}</option>
                                          {% endfor %}
                                        </select>
                                      </td>
                                      <td><button class="btn waves-effect waves-light white cyan-text border-cyan">Actualizar</button></td>
                                        <td><button class="btn waves-effect waves-light white red-text border-red" id="{{ moduloRequerido.id }}" onclick="deleteModulos(this.id, event)">Eliminar</button></td>
                                    </form>
                                </tr>
                                <tr id="sap-form-show-{{moduloRequerido.id}}">
                                    <td>{{ moduloRequerido.id_modulo.nombre }}</td>
                                    <td>{{ moduloRequerido.id_submodulo.nombre }}</td>
                                    <td class="label-experience">
                                    {% if moduloRequerido.id_experiencia_requerida.nombre.1 == '0' %}
                                        <div class="label-kCero">{{  moduloRequerido.id_experiencia_requerida.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_requerida.nombre.1 == '1' %}
                                        <div class="label-kUno">{{ moduloRequerido.id_experiencia_requerida.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_requerida.nombre.1 == '2' %}
                                        <div class="label-kDos">{{ moduloRequerido.id_experiencia_requerida.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_requerida.nombre.1 == '3' %}
                                        <div class="label-kTres">{{ moduloRequerido.id_experiencia_requerida.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_requerida.nombre.1 == '4' %}
                                        <div class="label-kCuatro">{{ moduloRequerido.id_experiencia_requerida.nombre }}</div>
                                    {% endif %}
                                    </td>
                                    <td class="label-experience2">
                                    {% if moduloRequerido.id_experiencia_deseable.nombre.1 == '0' %}
                                        <div class="label-kCero" style="margin-left: 35%; margin-top:-18px">{{  moduloRequerido.id_experiencia_deseable.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_deseable.nombre.1 == '1' %}
                                        <div class="label-kUno" style="margin-left: 35%; margin-top:-18px">{{ moduloRequerido.id_experiencia_deseable.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_deseable.nombre.1 == '2' %}
                                        <div class="label-kDos" style="margin-left: 35%; margin-top:-18px">{{ moduloRequerido.id_experiencia_deseable.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_deseable.nombre.1 == '3' %}
                                        <div class="label-kTres" style="margin-left: 35%; margin-top:-18px">{{ moduloRequerido.id_experiencia_deseable.nombre }}</div>
                                    {% elif moduloRequerido.id_experiencia_deseable.nombre.1 == '4' %}
                                        <div class="label-kCuatro" style="margin-left: 35%; margin-top:-18px">{{ moduloRequerido.id_experiencia_deseable.nombre }}</div>
                                    {% endif %}
                                    </td>
                                    <td><button class="btn waves-effect waves-light white cyan-text border-cyan" id="{{ moduloRequerido.id }}" onclick="editRowSapId(this.id)">Editar</button></td>
                                    <td><button class="btn waves-effect waves-light white red-text border-red" id="{{ moduloRequerido.id }}" onclick="deleteModulos(this.id, event)">Eliminar</button></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <!-- ADD REQUIREMENTS BUTTON -->
                        <div class="col s12 white">
                            <h4 class="waves-light darken-4">No hay modulos agregados</h4>
                        </div>
                    {% endif %}


                    <!-- TITLE AND CORPORATION -->
                    <div class="col s12 l9 pbtm20">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Requerimientos de Educación</h5>
                        <h6 class="grey-text">Información sobre las certificaciones o idiomas que los consultores
                            necesitan para el proyecto.</h6>
                    </div>


                    <form method="POST" action="{% url 'update_details_certificaciones_project' %}">
                        <input type="hidden" name="saber" value="{{ proyectos.id }}">
                        {% csrf_token %}
                        <!-- INPUT CERTIFICACIONES-->
                        <div class="input-field col s12 l4 white">
                            <input placeholder="ABAP" id="certifications" type="text" class="validate" value="{{ proyectos.certificacion }}" name="certificado">
                            <label for="certifications">Certificaciones Requeridas</label>
                        </div>
                        
                        <div class="input-field col s12 l4 white">
                            <select class="white" name="estudios" required>
                                <option value="Ingeniería">Educación Superior - Ingenieria</option>
                                <option value="Bachiller">Educación Media Superior - Bachiller</option>
                                <option value="Técnico">Educación Media Superior Técnica - Técnico</option>
                                <option value="Técnico Superior Universitario">Educación Superior - Técnico Superior Universitario
                                </option>
                                <option value="Licenciatura">Educación Superior - Licenciatura</option>
                                <option value="Maestría">Educación Superior - Maestría</option>
                                <option value="Doctorado">Educación Superior - Doctorado</option>
                            </select>
                            <label class="black-text white">Estudios Profesionales</label>
                        </div>
                        
                        <!-- UPDATE BUTTON -->
                        <div class="col s12 l4 white center ">
                            <button class="waves-effect waves-light btn grey darken-4">
                                ACTUALIZAR
                            </button>
                        </div>

                    </form>

                    {% if idiomasRequeridos %}
                        <!-- START TABLE -->
                        <table class="centered highlight">
                            <thead>
                                <tr>
                                    <th class="fw-bold">Idioma</th>
                                    <th class="fw-bold">Nivel Requerido</th>
                                    <th class="fw-bold">Nivel Deseado</th>
                                    <th class="fw-bold">Editar</th>
                                    <th class="fw-bold">Eliminar</th>
                                </tr>
                            </thead>

                            <tbody>
                                {% for idiomasRequerido in idiomasRequeridos %}
                                <tr style="display: none;" id="tr-idioma-{{idiomasRequerido.id}}">
                                    <form id="idioma-form-{{idiomasRequerido.id}}" method="POST" action="{% url 'update_requerimientos_idioma_project' %}">
                                      {% csrf_token %}
                                      <input type="hidden" name="saber" value="{{idiomasRequerido.id}}">
                                      <td>
                                        <select class="browser-default" name="idioma" required>
                                            <option value="" disabled selected>Idioma</option>
                                            {% for idioma in listaIdiomas %}
                                                <option value='{{idioma.id}}'>{{ idioma.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                      </td>
                                      <td><select class="browser-default" name="nivelIdiomaRequerido" required>
                                        <option value="" disabled selected>Nivel</option>
                                        <option value="Nivel A1 (Principiante)">Nivel A1 (Principiante)</option>
                                        <option value="Nivel A2 (Básico)">Nivel A2 (Básico)</option>
                                        <option value="Nivel B1 (Umbral)">Nivel B1 (Umbral)</option>
                                        <option value="Nivel B2 (Avanzado)">Nivel B2 (Avanzado)</option>
                                        <option value="Nivel C1 (Dominio efectivo)">Nivel C1 (Dominio efectivo)</option>
                                        <option value="Nivel C2 (Maestría)">Nivel C2 (Maestría)</option>
                                      </select></td>
                                      <td class="label-experience">
                                        <select class="browser-default" name="nivelIdiomaDeseado" required>
                                            <option value="" disabled selected>Nivel</option>
                                            <option value="Nivel A1 (Principiante)">Nivel A1 (Principiante)</option>
                                            <option value="Nivel A2 (Básico)">Nivel A2 (Básico)</option>
                                            <option value="Nivel B1 (Umbral)">Nivel B1 (Umbral)</option>
                                            <option value="Nivel B2 (Avanzado)">Nivel B2 (Avanzado)</option>
                                            <option value="Nivel C1 (Dominio efectivo)">Nivel C1 (Dominio efectivo)</option>
                                            <option value="Nivel C2 (Maestría)">Nivel C2 (Maestría)</option>
                                        </select>
                                      </td>
                                      <td><button class="btn waves-effect waves-light white cyan-text border-cyan">Actualizar</button></td>
                                        <td><button class="btn waves-effect waves-light white red-text border-red" id="{{ idiomasRequerido.id }}" onclick="deleteModulos(this.id, event)">Eliminar</button></td>
                                    </form>
                                </tr>
                                <tr id="idioma-form-show-{{idiomasRequerido.id}}">
                                    <td>{{ idiomasRequerido.id_idioma.nombre }}</td>
                                    <td>{{ idiomasRequerido.nivelRequerido }}</td>
                                    <td>{{ idiomasRequerido.nivelDeseado }}</td>
                                    
                                    <td><button class="btn waves-effect waves-light white cyan-text border-cyan" id="{{ idiomasRequerido.id }}" onclick="editRowIdiomaId(this.id)">Editar</button></td>
                                    <td><button class="btn waves-effect waves-light white red-text border-red" id="{{ idiomasRequerido.id }}" onclick="deleteIdiomas(this.id, event)">Eliminar</button></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    {% else %}
                        <!-- ADD REQUIREMENTS BUTTON -->
                        <div class="col s12 white">
                            <h5 class="waves-light darken-4">No hay requerimientos de idiomas agregados</h5>
                        </div>
                    {% endif %}

                    <!-- BUTTON REQUIREMENTS -->
                    <div class="col s12 l12 white pbtm20">
                        <button class="waves-effect waves-light btn grey darken-4" id="showButtonRequirementIdiomas">
                            Agregar idioma
                        </button>
                    </div>

                        <!-- HIDDEN CONTENT -->
                    <div class="col s12  white hidden-content" id="contentTableRequirementIdiomas" style="margin-left:-20px;">
                        <div class="row bcw">
                            <input type="hidden" id="tablaDatosIdioma" name="tablaDatosIdioma" value="">
                            <!-- TITLE -->
                            <h5 class="grey-text white black-text" style="margin-top:1cm;">Módulos requeridos para el
                                proyecto</h5>

                            <!-- START TABLE -->
                            <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                                <thead>
                                    <tr>
                                        <th>Idioma</th>
                                        <th>Nivel Requerida</th>
                                        <th>Nivel Deseada</th>
                                        <th>Editar</th>
                                    </tr>
                                </thead>

                                <tbody id="tabla-requerimientos-idioma">
                                    
                                </tbody>
                                <tfoot>
                                    <tr id="sap-form-edit-4-idioma">
                                        <td>
                                        <select class="browser-default" id="idiomaRequerimientoProyecto">
                                            <option value="" disabled selected>Idioma</option>
                                            {% for idioma in listaIdiomas %}
                                                <option value='{{idioma.nombre}}'>{{ idioma.nombre }}</option>
                                            {% endfor %}
                                        </select>
                                        </td>
                                        <td class="label-experience">
                                        <select class="browser-default" id="nivelRequeridoRequerimientoProyecto">
                                            <option value="" disabled selected>Nivel</option>
                                            <option value="Nivel A1 (Principiante)">Nivel A1 (Principiante)</option>
                                            <option value="Nivel A2 (Básico)">Nivel A2 (Básico)</option>
                                            <option value="Nivel B1 (Umbral)">Nivel B1 (Umbral)</option>
                                            <option value="Nivel B2 (Avanzado)">Nivel B2 (Avanzado)</option>
                                            <option value="Nivel C1 (Dominio efectivo)">Nivel C1 (Dominio efectivo)</option>
                                            <option value="Nivel C2 (Maestría)">Nivel C2 (Maestría)</option>
                                        </select>
                                        </td>
                                        <td class="label-experience3">
                                            <select class="browser-default" id="nivelDeseadoRequerimientoProyecto">
                                                <option value="" disabled selected>Nivel</option>
                                                <option value="Nivel A1 (Principiante)">Nivel A1 (Principiante)</option>
                                                <option value="Nivel A2 (Básico)">Nivel A2 (Básico)</option>
                                                <option value="Nivel B1 (Umbral)">Nivel B1 (Umbral)</option>
                                                <option value="Nivel B2 (Avanzado)">Nivel B2 (Avanzado)</option>
                                                <option value="Nivel C1 (Dominio efectivo)">Nivel C1 (Dominio efectivo)</option>
                                                <option value="Nivel C2 (Maestría)">Nivel C2 (Maestría)</option>
                                            </select>
                                        </td>
                                        <td><button class="btn waves-effect waves-light white cyan-text border-cyan" onclick="addRequerimientoIdiomas(event)">Agregar</button></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <!-- SUBMIT FORM -->
                        <div class="col s12 center white pbtm20">
                            <button class="waves-effect waves-light btn-large grey darken-4 white" id="{{ proyectos.id }}" onclick="addMoreRequirementsIdioma(this.id)">
                                <i class="material-icons right grey darken-4">arrow_forward</i>
                                Guardar y Continuar
                            </button>
                        </div>
                    </div>
                </div>
            </div>


            <!-- CONSULTORES POSTULADOS -->
            <div class="col s12 l12 white pbtm20" id="postulated_consultants">

                <div class="aligner" style="margin-left: 1cm; margin-right: 1cm;">

                    <!-- TITLE AND CORPORATION -->
                    <div class="col s12 l9">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Solicitud de consultores para el proyecto</h5>
                    </div>
                            {% if postulados %}
                                <!-- START TABLE -->
                                <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                                    <thead>
                                        <tr>
                                            <th class="fw-bold">Sexo y Edad</th>
                                            <th class="fw-bold">Experiencia</th>
                                            <th class="fw-bold">Tarifa por hora / Disponibilidad</th>
                                            <th class="fw-bold">Recomendación de Gnosis</th>
                                            <th class="fw-bold">Mas detalles</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                {%for postulado in postulados %}
                                    <tr>
                                        <td>{{ postulado.0 }} / {{ postulado.1 }} años</td>
                                        <td>{{ postulado.2 }}</td>
                                        <td>${{ postulado.3 }} {{ postulado.4 }} / {{ postulado.5 }}</td>
                                        <td>
                                            {% if postulado.8 == 0%}
                                                Sin calificación
                                            {% else %}
                                                {% with stars=postulado.8|floatformat:0 %}
                                                    {% for _ in ''|rjust:stars %}
                                                        <i class="material-icons amber-text">star</i>
                                                    {% endfor %}
                                                {% endwith %}   
                                            {% endif %}
                                        </td>
                                        <td>
                                            <!-- Botón para activar el menú desplegable -->
                                            <a class="dropdown-trigger btn grey darken-3" href="#" data-target="mas-acciones-{{ postulado.6 }}">
                                                <i class="material-icons white-text right trans" style="background-color: transparent;">arrow_drop_down</i>
                                                Acciones
                                            </a>
                                
                                            <!-- Menú desplegable -->
                                            <ul id="mas-acciones-{{ postulado.6 }}" class="dropdown-content">
                                                <li><a href="{% url 'curriculum_consultor_Empresa' id=postulado.6.id %}" target="_blank">Ver CV</a></li>
                                                <li><a id="{{ postulado.6.id }}" onclick="deletePostulation(this.id);">Eliminar Consultor</a></li>
                                                <li><a href="{% url 'mapa' id=postulado.6.id %}" target="_blank">Ver en Mapa</a></li>
                                                <li><a id="{{ postulado.6.id }}" onclick="solicitarInterview(this.id);">Solicitar Entrevista</a></li>
                                            </ul>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>

                            </table>
                            {% else %}
                                <div class="col s12 l9">
                                    <h6 class="black-text text-darken-4">No hay consultores interesados aun</h6>
                                </div>   
                            {% endif %}
                        

                    <!-- TITLE AND CORPORATION -->
                    <div class="col s12 l9" style="padding-top: 2cm;">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Consultores propuestos por Gnosis
                        </h5>
                    </div>


                    {% if postuladosGnosis %}
                                <!-- START TABLE -->
                                <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                                    <thead>
                                        <tr>
                                            <th class="fw-bold">Sexo y Edad</th>
                                            <th class="fw-bold">Experiencia</th>
                                            <th class="fw-bold">Tarifa por hora / Disponibilidad</th>
                                            <th class="fw-bold">Recomendación de Gnosis</th>
                                            <th class="fw-bold">Mas detalles</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                {%for postuladoGnosis in postuladosGnosis %}
                                    <tr>
                                        <td>{{ postuladoGnosis.0 }} / {{ postuladoGnosis.1 }} años</td>
                                        <td>{{ postuladoGnosis.2 }}</td>
                                        <td>${{ postuladoGnosis.3 }} {{ postuladoGnosis.4 }} / {{ postuladoGnosis.5 }}</td>
                                        <td>
                                            {% if postuladoGnosis.7 == 0%}
                                                Sin calificación
                                            {% else %}
                                                {% with stars=postuladoGnosis.7|floatformat:0 %}
                                                    {% for _ in ''|rjust:stars %}
                                                        <i class="material-icons amber-text">star</i>
                                                    {% endfor %}
                                                {% endwith %}   
                                            {% endif %}
                                        </td>
                                        <td>
                                            <!-- Botón para activar el menú desplegable -->
                                            <a class="dropdown-trigger btn grey darken-3" href="#" data-target="mas-acciones-{{ postuladoGnosis.6 }}">
                                                <i class="material-icons white-text right trans" style="background-color: transparent;">arrow_drop_down</i>
                                                Acciones
                                            </a>
                                
                                            <!-- Menú desplegable -->
                                            <ul id="mas-acciones-{{ postuladoGnosis.6 }}" class="dropdown-content">
                                                <li><a href="{% url 'curriculum_consultor_Empresa' id=postuladoGnosis.6.id %}">Ver CV</a></li>
                                                <li><a id="{{ postuladoGnosis.6.id }}" onclick="deletePostulation(this.id);">Eliminar Consultor</a></li>
                                                <li><a href="{% url 'mapa' id=postuladoGnosis.6.id %}" target="_blank">Ver en Mapa</a></li>
                                                <li><a id="{{ postuladoGnosis.6.id }}" onclick="solicitarInterview(this.id);">Solicitar Entrevista</a></li>
                                            </ul>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>

                            </table>
                            {% else %}
                                <div class="col s12 l9">
                                    <h6 class="black-text text-darken-4">No hay consultores interesados aun</h6>
                                </div>   
                            {% endif %}
                    
                </div>
                <br><br>
                <a class="btn grey darken-3" style="margin-left: 34%;" href="{% url 'allMapa' id=proyectos.id %}" target="_blank">Ver a los consultores en el mapa</a>
                <br>
                <br>
                <a class="btn grey darken-3" style="margin-left: 24%;" href="{% url 'allMapaGnosis' id=proyectos.id %}" target="_blank">Ver a los consultores propuestos por Gnosis en el mapa</a>
            </div>


            <!-- ENTREVISTAS -->
            <div class="col s12 l12 white pbtm20" id="interviews">
                <div class="aligner" style="margin-left: 1cm; margin-right: 1cm;">

                    <!-- TITLE -->
                    <div class="col s12 l12 white" style="margin-bottom: 10px;">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Entrevistas NO agendadas</h5>
                    </div>

                    {% if entrevistas %}
                        {% for entrevista in entrevistas%}
                            <!-- TARGET -->
                            <div class="col s12 l5 white" style="border: 3px solid rgba(61, 62, 61, 0.433); height:250px; margin:7px 1cm 7px 1cm;">
                                <!-- AVATAR GENERO EDAD STARS -->
                                <div class="col l7 center">
                                    <div class="col l12">
                                        <img src="{% static 'images/profile/defaultF.png' %}" alt="Logo Gnosis" style="  border-radius: 50%;
                                        height: 70px;
                                        margin-top: 16px;
                                        object-fit: cover;
                                        object-position: center;
                                        width: 70px;" />
                                    </div>
                                    <div class="col l12 fw-bold">{{ entrevista.0 }} / {{ entrevista.1 }} años</div>
                                    <div class="col l12">
                                        {% if entrevista.8 == 0%}
                                                Sin calificación
                                        {% else %}
                                                {% with stars=entrevista.8|floatformat:0 %}
                                                    {% for _ in ''|rjust:stars %}
                                                        <i class="material-icons amber-text">star</i>
                                                    {% endfor %}
                                                {% endwith %}   
                                        {% endif %}
                                        <p>({{entrevista.8}})</p>
                                    </div>
                                    <div class="col l12">
                                        ${{ entrevista.3 }} {{ entrevista.4 }} / {{ entrevista.7 }}
                                    </div>
                                </div>
        
        
                                <div class="col l5" style="border-left: 2px solid rgba(61, 62, 61, 0.373);">
                                    <div class="col l12">
                                        <h6>
                                            <span class="fw-bold">Experiencia:</span>
                                            <span>{{ entrevista.2 }}</span>
                                        </h6>
                                    </div>
        
                                    <div class="col s12 l12 white pbtm20">
                                        <a class="waves effect btn-small blue darken-3 white-text btn modal-trigger" id="mostraAgenda" data-target="modal1-{{entrevista.6}}">Agendar</a>
                                    </div>
        
                                </div>
                            </div>

                            <div id="modal1-{{entrevista.6}}" class="modal" style="height: 500px; width: 1200px !important;">
                                <form action="{% url 'entrevistaAgendada' %}" method="POST">
                                    {% csrf_token %}
                                    <input type="hidden" name="entrevista" value="{{entrevista.6}}">
                                    <input type="hidden" name="proyecto" value="{{proyectos.id}}">
                                    <div class="modal-content">
                                        <div class="row">
                                            <div class="col s12">
                                                <h5>Agendar Entrevista con Consultor</h5>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="input-field col s12 l12">
                                                <input placeholder="15/05/1998" name="date-end" type="text"
                                                                    class="datepicker" name="date_end" id="date-end3" title="El formato no es el correcto"
                                                                    required>
                                                <label for="date-start" class="active">Fecha Inicio</label>
                                            </div>
                                            <div class="input-field col s12 l6">
                                                <select id="hour-start" name="horas" requiered>
                                                    <option value="" disabled selected>Horas</option>
                                                    <option value="7">7 am</option>
                                                    <option value="8">8 am</option>
                                                    <option value="9">9 am</option>
                                                    <option value="10">10 am</option>
                                                    <option value="11">11 am</option>
                                                    <option value="12">12 pm</option>
                                                    <option value="13">1 pm</option>
                                                    <option value="14">2 pm</option>
                                                    <option value="15">3 pm</option>
                                                    <option value="16">4 pm</option>
                                                    <option value="17">5 pm</option>
                                                    <option value="18">6 pm</option>
                                                    <option value="19">7 pm</option>
                                                    <option value="20">8 pm</option>
                                                </select>
                                                <label>Hora Inicio</label>
                                            </div>
                                            <div class="input-field col s12 l6">
                                                <select id="minute-start" name="minutes" required>
                                                    <option value="" disabled selected>Minutos</option>
                                                    <option value="0">0 min</option>
                                                    <option value="10">10 min</option>
                                                    <option value="20">20 min</option>
                                                    <option value="30">30 min</option>
                                                    <option value="40">40 min</option>
                                                    <option value="50">50 min</option>
                                                </select>
                                                <label>Minuto Inicio</label>
                                            </div>
                                            <div class="col s12 l12 white" style="padding-top: 20px;">
                                                <button class="waves-effect btn blue">Aceptar</button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% endfor %}
                    {% else %}
                        <h6 class="black-text text-darken-4" style="margin-left: 14px;">No hay entrevistas no agendas</h6>
                    {% endif %}

            
                    <!-- TITLE -->
                    <div class="col s12 l12 white" style="margin-bottom: 10px; margin-top: 20px">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Entrevistas YA agendadas</h5>
                    </div>

                    {% if entrevistasAgendadas %}
                        <!-- START TABLE -->
                        <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                             <thead>
                                <tr>
                                    <th class="fw-bold">Sexo y Edad</th>
                                    <th class="fw-bold">Fecha y Hora</th>
                                    <th class="fw-bold">Ubicacion</th>
                                    <th class="fw-bold">Estatus de la Entrevista</th>
                                    <th class="fw-bold">Mas detalles</th>
                                </tr>
                            </thead>

                            <tbody>
                                    {% for entrevistaAgendada in entrevistasAgendadas %}
                                    <tr>
                                        <td>{{ entrevistaAgendada.0 }} / {{ entrevistaAgendada.1 }} años</td>
                                        <td>{{ entrevistaAgendada.8|date:"d/m/Y" }} / {{ entrevistaAgendada.9 }}</td>
                                        <td>{{ entrevistaAgendada.7 }}</td>
                                        <td>
                                            {% if entrevistaAgendada.10 == 'Concluida' %}
                                                <div class="chip green white-text">Concluida</div>
                                            {% elif entrevistaAgendada.10 == 'Confirmada' %}
                                                <div class="chip orange white-text">Confirmada</div>
                                            {% elif entrevistaAgendada.10 == 'Cancelada' %}
                                                <div class="chip grey white-text">Cancelada</div>
                                            {% else %}
                                                <div class="chip blue white-text">Esperando Confirmación</div>
                                            {% endif %}

                                        </td>
                                        <td>
                                            <!-- Dropdown Trigger -->
                                            <a class='dropdown-trigger btn grey darken-3' href='#'
                                                data-target='interviews-actions-{{entrevistaAgendada.6}}'><i
                                                    class="material-icons white-text right trans"
                                                    style="background-color: transparent;">arrow_drop_down</i>Acciones</a>

                                        </td>
                                        <td>
                                            <!-- Dropdown Structure -->
                                            <ul id='interviews-actions-{{entrevistaAgendada.6}}' class='dropdown-content'>
                                                <li><a id="{{entrevistaAgendada.11}}" onclick="validarEntrevistaGnosis(this.id);">Validar Entrevista</a></li>
                                                <li><a id="{{entrevistaAgendada.11}}" onclick="nuevaEntrevista(this.id);">Añadir nueva entrevista</a></li>
                                                <li><a id="{{entrevistaAgendada.6}}" onclick="eliminarEntrevista(this.id);">Cancelar entrevista</a></li>                                 
                                            </ul>                                   
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                    {% else %}
                        <div class="col s12 l12 white" style="margin-bottom: 10px; margin-top: 20px">
                            <h6 class="black-text text-darken-4">No hay entrevistas YA agendadas</h6>
                        </div>
                    {% endif %}
                </div>
            </div>


            <!-- CONSULTANTS PROJECT -->
            <div class="col s12 l12 white pbtm20" id="consultants_project">

                <div class="aligner" style="margin-left: 1cm; margin-right: 1cm;">

                    <!-- TITLE AND CORPORATION -->
                    <div class="col s12 l9">
                        <h5 class="black-text text-darken-4" style="font-weight:bold;">Consultores en Proyecto</h5>
                    </div>


                    {% if proyectosConsultores %}
                        
                            <!-- START TABLE -->
                            <table class="centered highlight" style="margin-top:1cm; padding-right:1cm;">
                                <thead>
                                    <tr>
                                        <th class="fw-bold">Nombre y edad</th>
                                        <th class="fw-bold">Horario de Trabajo</th>
                                        <th class="fw-bold">Modulos y Submodulos</th>
                                        <th class="fw-bold">Estatus de la entrevista</th>
                                        <th class="fw-bold">Más detalles</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    {% for proyectosConsultor in proyectosConsultores %}
                                    <tr>
                                        <td>{{ proyectosConsultor.7 }} / {{ proyectosConsultor.1 }} años</td>
                                        <td>{{ proyectosConsultor.4 }} {{ proyectosConsultor.5 }}</td>
                                        <td>{{ proyectosConsultor.2 }}</td>
                                        <td>
                                            {% if proyectosConsultor.6 == 'Eliminado' %}
                                                <div class="chip grey white-text wid-2cm">Eliminado</div>
                                            {% elif proyectosConsultor.6 == 'Aceptada' %}
                                                <div class="chip green white-text">Aceptada </div>
                                            {% else %}
                                                <div class="chip blue white-text wid-45cm">Esperando Confirmación</div>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <a class='dropdown-trigger btn grey darken-3' href='#'
                                                data-target='consultores_project-{{ proyectosConsultor.3 }}'><i
                                                    class="material-icons white-text right trans"
                                                    style="background-color: transparent;">arrow_drop_down</i>Mas</a>
                                        </td>
                                        <td>
                                            <!-- Dropdown Structure -->
                                    
                                            <ul id='consultores_project-{{ proyectosConsultor.3 }}' class='dropdown-content'>
                                    
                                                <li><a onclick="solictarReporteHoras(this.id);" id="{{proyectosConsultor.3.id}}">Solicitar R. de Horas</a></li>
                                    
                                                <li><a href="{% url 'consultorFacturas' id=proyectosConsultor.3.id prj=proyectos.id %}" target="_blank">Ver Facturas</a></li>
                                    
                                                <li><a href="{% url 'consultorEmpresa' id=proyectosConsultor.3.id_persona.id prj=proyectos.id %}" target="_blank">Detalles Consultor</a></li>
                                    
                                                <li><a href="{% url 'formComentariosEvaluacion' id=proyectosConsultor.3.id  prj=proyectos.id %}" target="_blank">Eliminar Consultor</a></li>

                                            </ul>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        
                    {% else %}
                    <div class="col s12 l12 white" style="margin-bottom: 10px; margin-top: 20px">
                        <h6 class="black-text text-darken-4">Aun no hay ningun consultor en este proyecto</h6>
                    </div>
                    {% endif %}


                </div>
            </div>
        </div>
    </div>


    <div class="container white" style="margin-top:20px; width:84%; margin-left:9%; display:none;" id="container-update">
        <div class="row white" style="margin-right:20px; margin-left:20px;">
            <!--PAGE SUBTITLE -->
            <div class="col s12 white">
                <h4 class="blue-text text-darken-4 white">Información Básica</h4>
                <h6 class="grey-text white pbtm20">Información basica del proyecto (Datos que vera el Consultor)</h6>
            </div>

            <!-- FORM START -->
            <form id="form-new-project" action="{% url 'update_details_project' %}" method="POST">
                {% csrf_token %}
                <input type="hidden" name="saber" value="{{ proyectos.id }}">
                <!-- CHOOSE A TITLE PROJECT -->
                <div class="input-field col s6 white">
                    <input placeholder="EJ. Requerimiento Consultor SAP" id="title_project" type="text"
                        class="validate white" minlength="3" maxlength="50"
                        title="Titulo con solo letras no mayor a 50 caracteres ni menor de 3" name="titulo" value="{{ proyectos.proyecto_nombre }}" required>
                    <label for="title_project" class="white black-text">Titulo del Proyecto</label>
                </div>


                <!--CHOOSE A CATEORY PROJECT -->
                <div class="input-field col s6 white">
                    <select class="white" name="categoria" id="categoria" required>
                        <option value="" disabled selected>Categoria</option>
                        {% for categoria in categorias %}
                        <option value='{{categoria.id}}'>{{ categoria.categoria_nombre }}</option>
                        {% endfor %}{
                    </select>
                    </select>
                    <label class="black-text white">Categoria del Proyecto</label>
                </div>

                <!-- CHOOSE A DATE START -->
                <div class="col s3 input-field">
                    <i class="large material-icons prefix ">date_range</i>
                    <input id="date_start" placeholder="15/05/2023" name="date_start" type="text" class="datepicker"
                        title="El formato no es el correcto" value="" required>
                    <label for="title_project" class="black-text">Fecha Inicio</label>
                </div>


                <!-- CHOOSE A DATE END -->
                <div class="col s3 input-field">
                    <i class="large material-icons prefix ">date_range</i>
                    <input id="date-end2" placeholder="15/05/2023" name="date-end2" type="text" class="datepicker" title="El formato no es el correcto" value="" required>
                    <label for="title_project" class="black-text">Fecha Fin</label>
                </div>


                <!-- CHOOSE A COIN -->
                <div class="input-field col s6 white">
                    <select class="white" name="moneda" id="moneda" required>
                        <option value="" disabled selected>Moneda</option>
                        {% for moneda in monedaCobro %}
                        <option value='{{moneda.id}}'>{{ moneda.tipo }}</option>
                        {% endfor %}{
                    </select>
                    <label class="black-text white">Moneda que se manejara</label>
                </div>

                <!-- CHOOSE A NUMBER OF CONSULTORES -->
                <div class="input-field col s6 white espaciado">
                    <input placeholder="EJ. 5" id="cant_consultores" type="number" class="validate white"
                        pattern="[0-9]" min="1" max="15" title="Unicamente cantidades entre 1 y 15" name="consultores" required>
                    <label for="title_project" class="white black-text">Numero preferente de Consultores</label>
                </div>

                <!-- CHOOSE A STATE -->
                <div class="input-field col s3 white">
                    <select class="white" name="estado" id="estado" required>
                        <option value="Staffing" selected>Staffing</option>
                        <option value="No trabajado" >No trabajado</option>
                        <option value="Terminado" >Terminado</option>
                    </select>
                    <label class="black-text white">Estado del proyecto</label>
                </div>

                <!-- CHOOSE A STATE -->
                <div class="input-field col s3 white">
                    <select class="white" name="tipo" id="tipo" required>
                        <option value="Completo" selected>Completo</option>
                        <option value="Remoto" >Remoto</option>
                        <option value="Medio tiempo" >Medio tiempo</option>
                    </select>
                    <label class="black-text white">Tipo de trabajo</label>
                </div>
                

                <!-- DESCRIPTION PROJECT -->
                <div class="input-field col s12 pbtm20">
                    <input placeholder="Agregar información, como una breve problematica a resolver"
                        id="description_project" type="text" class="validate white" minlength="25" maxlength="75"
                        title="Use solo letras NO numeros" name="descripcion" value="{{ proyectos.description }}" required>
                    <label for="description_project" class="white black-text">Descripción del Proyecto</label>
                </div>


                <!-- FUNTIONS PROJECT  -->
                <div class="input-field col s12 pbtm20">
                    <input placeholder="Agregar información, como las actividades a resolver por parte del consultor"
                        id="functions_project" type="text" class="validate white" minlength="25" maxlength="75"
                        title="Use solo letras NO numeros" name="funciones"  value="{{ proyectos.fun_laborales }}" required>
                    <label for="description_project" class="white black-text">Funciones Laborales</label>
                </div>


                <!-- SUBMIT FORM -->
                <div class="col s12 center white pbtm20">
                    <button class="waves-effect waves-light btn-large grey darken-4 white">
                        <i class="material-icons right grey darken-4">arrow_forward</i>
                        Guardar y Continuar
                    </button>
                </div>
            </form>
        </div>
        <input type="hidden" name="" id="proyectoID" value="{{ proyectos.id }}">
        <input type="hidden" name="" id="empresaID" value="{{ empresa.id }}">
    </div>
</section>


<script>

    function solictarReporteHoras(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres solicitarlo?',
          text: "El consultor sera notificado",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, asi es'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            let idEmpresa = document.getElementById('empresaID').value;
            fetch(`{% url 'solicitarReporteHoras' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                consultor: id,
                proyecto:idProyecto,
                empresa:idEmpresa,
              })
            })
              .then(response => {
                if (response.status == 200) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Se ha solicitado el reporte',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    // Esperar 1 segundo antes de actualizar la página
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }


    function eliminarEntrevista(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres cancelar la entrevista?',
          text: "La entrevista sera cancelada y el consultor sera notificado",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, asi es'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            let idEmpresa = document.getElementById('empresaID').value;
            fetch(`{% url 'eliminarEntrevista' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                entrevista: id,
                proyecto:idProyecto,
                empresa:idEmpresa,
              })
            })
              .then(response => {
                if (response.status == 200) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Se ha cancelado la entrevista',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    // Esperar 1 segundo antes de actualizar la página
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }

    function nuevaEntrevista(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres solicitar una nueva entrevista?',
          text: "Se creara una nueva entrevista no agendada",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, asi es'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            let idEmpresa = document.getElementById('empresaID').value;
            fetch(`{% url 'nuevaEntrevista' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                consultor: id,
                proyecto:idProyecto,
                empresa:idEmpresa,
              })
            })
              .then(response => {
                if (response.status == 200) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Se ha generado la entrevista',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    // Esperar 1 segundo antes de actualizar la página
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }


    function validarEntrevistaGnosis(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres solicitar la validacion?',
          text: "El equipo de Gnosis validara la entrevista",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, asi es'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            fetch(`{% url 'validarEntrevistaGnosis' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                consultor: id,
                proyecto:idProyecto,
              })
            })
              .then(response => {
                if (response.status == 200) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Se ha generado la entrevista',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    // Esperar 1 segundo antes de actualizar la página
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }

    document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.modal');
        // var instances = M.Modal.init(elems, options);
      });
    
      // Or with jQuery
    
      $(document).ready(function(){
        $('.modal').modal();
      });
      
    function solicitarInterview(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres solicitar una entrevista?',
          text: "El postulado pasara al area de entrevistas",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, envíalo'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            fetch(`{% url 'solicitarEntrevista' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                id: id,
                proyecto:idProyecto,
              })
            })
              .then(response => {
                if (response.status == 200) {
                    Swal.fire({
                        position: 'top-end',
                        icon: 'success',
                        title: 'Se ha generado la entrevista',
                        showConfirmButton: false,
                        timer: 1500
                    })
                    // Esperar 1 segundo antes de actualizar la página
                    setTimeout(function() {
                        location.reload();
                    }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }


    function deletePostulation(id){
        // console.log(id);
        Swal.fire({
          title: '¿Quieres eliminar la postulacion?',
          text: "El consultor sera notificado",
          icon: 'info',
          showCancelButton: true,
          confirmButtonColor: '#3085d6',
          cancelButtonColor: '#d33',
          cancelButtonText:'Cancelar',
          confirmButtonText: 'Si, eliminala'
        }).then((result) => {
          if (result.isConfirmed) {
            const csrftoken = getCookie('csrftoken');
            let idProyecto = document.getElementById('proyectoID').value;
            fetch(`{% url 'deletePostulacionProyectos' %}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': csrftoken
              },
              body: JSON.stringify({
                id: id,
                proyecto:idProyecto,
              })
            })
              .then(response => {
                if (response.status == 200) {
                  Swal.fire({
                    position: 'top-end',
                    icon: 'success',
                    title: 'Se ha eliminado la postulacion',
                    showConfirmButton: false,
                    timer: 1500
                  })
                  // Esperar 1 segundo antes de actualizar la página
                  setTimeout(function() {
                    location.reload();
                }, 1000);
                } else {
                  throw new Error('Error en la solicitud. Código de estado: ' + response.status);
                }
              })
              .then(data => {
                // Manejar la respuesta del servidor
                console.log(data);
              })
              .catch(error => {
                // Manejar errores de la solicitud
                Swal.fire({
                  icon: "error",
                  title: "Oops...",
                  text: "Algo salio mal",
                });
              });
          }
        })
    }


    function deleteIdiomas(id, event) {
        event.preventDefault();
        console.log(id);

        Swal.fire({
            title: '¿Quieres eliminarlo?',
            showDenyButton: true,
            confirmButtonText: 'Sí',
            denyButtonText: `No`,
          }).then((result) => {
            /* Read more about isConfirmed, isDenied below */
            if (result.isConfirmed) {
              // Obtener el token CSRF del documento
                const csrftoken = getCookie('csrftoken');
                fetch("{% url 'delete_requerimientos_idiomas_project' id=1 %}".replace('1', id), {
                    method: 'DELETE',
                    headers: {
                    'X-CSRFToken': csrftoken
                    },
                })
                    .then(response => {
                    // Manejar la respuesta de la solicitud
                    if (response.status == 200) {
                        // La solicitud se completó correctamente
                        location.reload();
                        // Realizar las acciones adicionales que necesites después de eliminar el requerimiento
                    } else {
                        // La solicitud no se completó correctamente
                        location.reload();
                    }
                    })
                    .catch(error => {
                    // Manejar el error de la solicitud
                    console.error('Error en la solicitud:', error);
          });
            } else if (result.isDenied) {
              Swal.fire('No se elimino', '', 'info')
            }
          })
      }



    function addMoreRequirementsIdioma(id){
        const csrftoken = getCookie('csrftoken');
        fetch("{% url 'add_requerimientos_idiomas_project' id=1 %}".replace('1', id), {
        method: 'POST', // O el método que corresponda
        headers: {
            'X-CSRFToken': csrftoken,
            'Content-Type': 'application/json',
        },
        body: document.getElementById('tablaDatosIdioma').value,
        })
        .then(response => {
            // Manejar la respuesta de la solicitud
            if (response.status == 200) {
                // La solicitud se completó correctamente
                console.log('Datos enviados con éxito');
                location.reload();
                // Realizar las acciones adicionales que necesites después de enviar los datos
            } else {
                // La solicitud no se completó correctamente
                console.error('Error al enviar los datos');
            }
        })
        .catch(error => {
            // Manejar el error de la solicitud
            console.error('Error en la solicitud:', error);
        });

    }

    let idiomas = [];
    function addRequerimientoIdiomas(event) {
        event.preventDefault();
        // Obtener los valores seleccionados de los elementos select
        var idiomaRequerimientoProyecto = document.getElementById('idiomaRequerimientoProyecto').value;
        var nivelRequeridoRequerimientoProyecto = document.getElementById('nivelRequeridoRequerimientoProyecto').value;
        var nivelDeseadoRequerimientoProyecto = document.getElementById('nivelDeseadoRequerimientoProyecto').value;
        
        // Crear una nueva fila y las celdas con los valores capturados
        var nuevaFila = document.createElement('tr');
        var celdaIdioma = document.createElement('td');
        celdaIdioma.textContent = idiomaRequerimientoProyecto;
        var celdaNivelRequerido = document.createElement('td');
        celdaNivelRequerido.textContent = nivelRequeridoRequerimientoProyecto;
        var celdaNivelDeseado = document.createElement('td');
        celdaNivelDeseado.textContent = nivelDeseadoRequerimientoProyecto;
        

        
        // Agregar las celdas a la nueva fila
        nuevaFila.appendChild(celdaIdioma);
        nuevaFila.appendChild(celdaNivelRequerido);
        nuevaFila.appendChild(celdaNivelDeseado);
        nuevaFila.style.textAlign = 'center';
        
        // Agregar la nueva fila a la tabla
        var tabla = document.getElementById('tabla-requerimientos-idioma');
        tabla.appendChild(nuevaFila);        
        const filas = tabla.getElementsByTagName('tr');
        var tabla = document.getElementById('tabla-requerimientos-idioma');
        var tablaDatosInputIdioma = document.getElementById('tablaDatosIdioma');
        idiomas = [];
        for (var i = 0; i < tabla.rows.length; i++) {
            var fila = tabla.rows[i];
            var celdas = fila.cells;
            var filaDatos = [];
            for (var j = 0; j < celdas.length; j++) {
            filaDatos.push(celdas[j].textContent.trim());
            }
            idiomas.push(filaDatos);
        }
        // Convertir los datos a JSON y asignarlos al valor del campo oculto
        tablaDatosInputIdioma.value = JSON.stringify(idiomas);
        console.log(idiomas);
    }
    

    var showButton2 = document.getElementById('showButtonRequirementIdiomas');
    var content2 = document.getElementById('contentTableRequirementIdiomas');

    showButton2.addEventListener('click', function(){
        if (content2.classList.contains('hidden-content')){
            content2.classList.remove('hidden-content');
            showButton2.textContent ="Ocultar";
        } else {
            content2.classList.add('hidden-content');
            showButton2.textContent = "Agregar Requerimiento";
        }
    });


    function editRowIdiomaId(id){
        console.log(id)
        let tr = document.getElementById(`tr-idioma-${id}`);
        tr.style.display = '';

        let trShow = document.getElementById(`idioma-form-show-${id}`);
        trShow.style.display = 'none';
    }

    let modulos = [];
    let cantidadModulo = 0;
    
    function addMoreRequirements(id){
        const csrftoken = getCookie('csrftoken');
        fetch("{% url 'add_requerimientos_project' id=1 %}".replace('1', id), {
        method: 'POST', // O el método que corresponda
        headers: {
            'X-CSRFToken': csrftoken,
            'Content-Type': 'application/json',
        },
        body: document.getElementById('tablaDatos').value,
        })
        .then(response => {
            // Manejar la respuesta de la solicitud
            if (response.status == 200) {
                // La solicitud se completó correctamente
                console.log('Datos enviados con éxito');
                location.reload();
                // Realizar las acciones adicionales que necesites después de enviar los datos
            } else {
                // La solicitud no se completó correctamente
                console.error('Error al enviar los datos');
            }
        })
        .catch(error => {
            // Manejar el error de la solicitud
            console.error('Error en la solicitud:', error);
        });

    }

    function addRequerimientoSAP(event) {
        event.preventDefault();
        // Obtener los valores seleccionados de los elementos select
        var modulo = document.getElementById('moduloSAP').value;
        var submodulo = document.getElementById('submoduloSAP').value;
        var experienciaRequerida = document.getElementById('nivelRequeridoSAP').value;
        var experienciaDeseada = document.getElementById('nivelDeseadoSAP').value;
        
        // Crear una nueva fila y las celdas con los valores capturados
        var nuevaFila = document.createElement('tr');
        var celdaModulo = document.createElement('td');
        celdaModulo.textContent = modulo;
        var celdaSubmodulo = document.createElement('td');
        celdaSubmodulo.textContent = submodulo;
        
        var celdaExperienciaRequerida = document.createElement('td');
        var divLabel = document.createElement('div');
        divLabel.textContent = experienciaRequerida;
        if(experienciaRequerida == 'K0'){
            divLabel.className = 'label-kCero';
        }else if(experienciaRequerida == 'K1'){
            divLabel.className = 'label-kUno';
        }else if(experienciaRequerida == 'K2'){
            divLabel.className = 'label-kDos';
        }else if(experienciaRequerida == 'K3'){
            divLabel.className = 'label-kTres';
        }else if(experienciaRequerida == 'K4'){
            divLabel.className = 'label-kCuatro';
        }
        divLabel.style.marginLeft = '34%';
        celdaExperienciaRequerida.appendChild(divLabel)
    
        var celdaExperienciaDeseada = document.createElement('td');
        var divLabel2 = document.createElement('div');
        divLabel2.textContent = experienciaDeseada;
        if(experienciaDeseada == 'K0'){
            divLabel2.className = 'label-kCero';
        }else if(experienciaDeseada == 'K1'){
            divLabel2.className = 'label-kUno';
        }else if(experienciaDeseada == 'K2'){
            divLabel2.className = 'label-kDos';
        }else if(experienciaDeseada == 'K3'){
            divLabel2.className = 'label-kTres';
        }else if(experienciaDeseada == 'K4'){
            divLabel2.className = 'label-kCuatro';
        }
        divLabel2.style.marginLeft = '34%';

        celdaExperienciaDeseada.appendChild(divLabel2);
        
        // Agregar las celdas a la nueva fila
        nuevaFila.appendChild(celdaModulo);
        nuevaFila.appendChild(celdaSubmodulo);
        nuevaFila.appendChild(celdaExperienciaRequerida);
        nuevaFila.appendChild(celdaExperienciaDeseada);
        nuevaFila.style.textAlign = 'center';
        
        // Agregar la nueva fila a la tabla
        var tabla = document.getElementById('tabla-requerimientos');
        tabla.appendChild(nuevaFila);        
        const filas = tabla.getElementsByTagName('tr');

        // Recorrer las filas de la tabla
       // Obtener el campo oculto
        // Recorrer las filas de la tabla y obtener los valores
        var tabla = document.getElementById('tabla-requerimientos');
        var tablaDatosInput = document.getElementById('tablaDatos');
        var modulos = [];
        for (var i = 0; i < tabla.rows.length; i++) {
            var fila = tabla.rows[i];
            var celdas = fila.cells;
            var filaDatos = [];
            for (var j = 0; j < celdas.length; j++) {
            filaDatos.push(celdas[j].textContent.trim());
            }
            modulos.push(filaDatos);
        }
        // Convertir los datos a JSON y asignarlos al valor del campo oculto
        tablaDatosInput.value = JSON.stringify(modulos);
        console.log(modulos)
     }


    var showButton = document.getElementById('showButtonRequirement');
    var content = document.getElementById('contentTableRequirement');

    showButton.addEventListener('click', function(){
        if (content.classList.contains('hidden-content')){
            content.classList.remove('hidden-content');
            showButton.textContent ="Ocultar";
        } else {
            content.classList.add('hidden-content');
            showButton.textContent = "Agregar Requerimiento";
        }
    });

    function deleteModulos(id, event) {
        event.preventDefault();
        console.log(id);


        Swal.fire({
            title: '¿Quieres eliminarlo?',
            showDenyButton: true,
            confirmButtonText: 'Sí',
            denyButtonText: `No`,
          }).then((result) => {
            /* Read more about isConfirmed, isDenied below */
            if (result.isConfirmed) {
              // Obtener el token CSRF del documento
                const csrftoken = getCookie('csrftoken');
                fetch("{% url 'delete_requerimientos_project' id=1 %}".replace('1', id), {
                    method: 'DELETE',
                    headers: {
                    'X-CSRFToken': csrftoken
                    },
                })
                    .then(response => {
                    // Manejar la respuesta de la solicitud
                    if (response.status == 200) {
                        // La solicitud se completó correctamente
                        location.reload();
                        // Realizar las acciones adicionales que necesites después de eliminar el requerimiento
                    } else {
                        // La solicitud no se completó correctamente
                        location.reload();
                    }
                    })
                    .catch(error => {
                    // Manejar el error de la solicitud
                    console.error('Error en la solicitud:', error);
          });
            } else if (result.isDenied) {
              Swal.fire('No se elimino', '', 'info')
            }
        })
    }
      
      // Función para obtener el valor de una cookie por su nombre
      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
      }
      

    function editRowSapId(id){
        console.log(id)
        let tr = document.getElementById(`tr-${id}`);
        console.log(tr)
        tr.style.display = '';

        let trShow = document.getElementById(`sap-form-show-${id}`);
        trShow.style.display = 'none';
    }


    document.addEventListener("DOMContentLoaded", function () {
        var fechaSalidaInput = document.getElementById("date_start");
        M.Datepicker.init(fechaSalidaInput, {
          format: "yyyy-mm-dd",
          autoClose: true,
          autoClose: true,
          showClearBtn: true,
          firstDay: 1,
          minDate: new Date(1969, 1, 12),
          maxDate: new Date(2043, 11, 31),
          i18n: {
            cancel: "Cancelar",
            clear: "Limpiar",
            done: "Listo",
            today: "Hoy",
            previousMonth: "Mes anterior",
            nextMonth: "Siguiente mes",
            months: [
              "Enero",
              "Febrero",
              "Marzo",
              "Abril",
              "Mayo",
              "Junio",
              "Julio",
              "Agosto",
              "Septiembre",
              "Octubre",
              "Noviembre",
              "Diciembre",
            ],
            monthsShort: [
              "Ene",
              "Feb",
              "Mar",
              "Abr",
              "May",
              "Jun",
              "Jul",
              "Ago",
              "Sep",
              "Oct",
              "Nov",
              "Dic",
            ],
            weekdays: [
              "Domingo",
              "Lunes",
              "Martes",
              "Miércoles",
              "Jueves",
              "Viernes",
              "Sábado",
            ],
            weekdaysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
            weekdaysAbbrev: ["D", "L", "M", "M", "J", "V", "S"],
          },
          onClose: function () {
            setTimeout(function () {
              let fechaEntrada = document.getElementById("date_start").value;
              let fechaSalida = document.getElementById("date-end2").value;
              //var fechaNacInput = document.getElementById("fecha-nacimiento").value;
              // console.log(fechaNacInput);
      
              var dateEntrada = new Date(fechaEntrada);
              var dateSalida = new Date(fechaSalida);
              var fechaHoy = new Date(); 
              if (dateEntrada == dateSalida) {
                document.getElementById("date-end2").value = "";
                Swal.fire("La fecha de entrada no debe igual que la de salida");
              }
              if (dateEntrada >= dateSalida) {
                document.getElementById("date_start").value = "";
                Swal.fire("La fecha de salida no debe ser menor que la de entrada");
              }
              if(dateSalida<=dateEntrada){
                document.getElementById("date_start").value = "";
                Swal.fire("La fecha de entrada no debe ser mayor que la de entrada");
              }
      
              console.log(fechaHoy);
            }, 1000);
          },
        });
      });
    document.addEventListener("DOMContentLoaded", function () {
        var fechaSalidaInput = document.getElementById("date-end2");
        M.Datepicker.init(fechaSalidaInput, {
          format: "yyyy-mm-dd",
          autoClose: true,
          autoClose: true,
          showClearBtn: true,
          firstDay: 1,
          minDate: new Date(1969, 1, 12),
          maxDate: new Date(2043, 11, 31),
          i18n: {
            cancel: "Cancelar",
            clear: "Limpiar",
            done: "Listo",
            today: "Hoy",
            previousMonth: "Mes anterior",
            nextMonth: "Siguiente mes",
            months: [
              "Enero",
              "Febrero",
              "Marzo",
              "Abril",
              "Mayo",
              "Junio",
              "Julio",
              "Agosto",
              "Septiembre",
              "Octubre",
              "Noviembre",
              "Diciembre",
            ],
            monthsShort: [
              "Ene",
              "Feb",
              "Mar",
              "Abr",
              "May",
              "Jun",
              "Jul",
              "Ago",
              "Sep",
              "Oct",
              "Nov",
              "Dic",
            ],
            weekdays: [
              "Domingo",
              "Lunes",
              "Martes",
              "Miércoles",
              "Jueves",
              "Viernes",
              "Sábado",
            ],
            weekdaysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
            weekdaysAbbrev: ["D", "L", "M", "M", "J", "V", "S"],
          },
          onClose: function () {
            setTimeout(function () {
              let fechaEntrada = document.getElementById("date_start").value;
              let fechaSalida = document.getElementById("date-end2").value;
              //var fechaNacInput = document.getElementById("fecha-nacimiento").value;
              // console.log(fechaNacInput);
      
              var dateEntrada = new Date(fechaEntrada);
              var dateSalida = new Date(fechaSalida);
              var fechaHoy = new Date(); 
              if (dateEntrada == dateSalida) {
                document.getElementById("date-end2").value = "";
                Swal.fire("La fecha de entrada no debe igual que la de salida");
              }
              if (dateEntrada >= dateSalida) {
                document.getElementById("date_start").value = "";
                Swal.fire("La fecha de salida no debe ser menor que la de entrada");
              }
              if(dateSalida<=dateEntrada){
                document.getElementById("date_start").value = "";
                Swal.fire("La fecha de entrada no debe ser mayor que la de entrada");
              }
              console.log(fechaHoy);
            }, 1000);
          },
        });
      });


      document.addEventListener("DOMContentLoaded", function () {
        var fechaSalidaInput = document.getElementById("date-end3");
        M.Datepicker.init(fechaSalidaInput, {
          format: "yyyy-mm-dd",
          autoClose: true,
          autoClose: true,
          showClearBtn: true,
          firstDay: 1,
          minDate: new Date(1969, 1, 12),
          maxDate: new Date(2043, 11, 31),
          i18n: {
            cancel: "Cancelar",
            clear: "Limpiar",
            done: "Listo",
            today: "Hoy",
            previousMonth: "Mes anterior",
            nextMonth: "Siguiente mes",
            months: [
              "Enero",
              "Febrero",
              "Marzo",
              "Abril",
              "Mayo",
              "Junio",
              "Julio",
              "Agosto",
              "Septiembre",
              "Octubre",
              "Noviembre",
              "Diciembre",
            ],
            monthsShort: [
              "Ene",
              "Feb",
              "Mar",
              "Abr",
              "May",
              "Jun",
              "Jul",
              "Ago",
              "Sep",
              "Oct",
              "Nov",
              "Dic",
            ],
            weekdays: [
              "Domingo",
              "Lunes",
              "Martes",
              "Miércoles",
              "Jueves",
              "Viernes",
              "Sábado",
            ],
            weekdaysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
            weekdaysAbbrev: ["D", "L", "M", "M", "J", "V", "S"],
          },
          onClose: function () {
            setTimeout(function () {
              let fechaEntrada = document.getElementById("date_start").value;
              let fechaSalida = document.getElementById("date-end").value;
              //var fechaNacInput = document.getElementById("fecha-nacimiento").value;
              // console.log(fechaNacInput);
      
              var dateEntrada = new Date(fechaEntrada);
              var dateSalida = new Date(fechaSalida);
              var fechaHoy = new Date(); // Crear un objeto Date con la fecha y hora actuales
              //var fechaNac = moment(fechaNacInput, "MMM. DD, YYYY, h:mm a");
              //var fechaDate = fechaNac.toDate();
              //fechaDate.setFullYear(fechaDate.getFullYear() + 18);
              //console.log(fechaDate);
      
              /*if (dateEntrada <= fechaDate) {
                document.getElementById("ageInit").value = "";
                Swal.fire(
                  "La fecha de entrada no debe ser menor que tu edad minima requerida"
                );
              }*/
              if (dateEntrada == dateSalida) {
                document.getElementById("date-end").value = "";
                Swal.fire("La fecha de entrada no debe igual que la de salida");
              }
              if (dateEntrada >= dateSalida) {
                document.getElementById("date_start").value = "";
                Swal.fire("La fecha de salida no debe ser menor que la de entrada");
              }
      
              console.log(fechaHoy);
            }, 1000);
          },
        });
      });
    function updateInformation(){
        
        let div = document.getElementById('container-update');
        if(div.style.display == ''){
            div.style.display = 'none';
        }else{
            div.style.display = '';
        }
    }



    // Inicializar el select
    document.addEventListener('DOMContentLoaded', function () {
        var elems = document.querySelectorAll('select');
        var instances = M.FormSelect.init(elems);
    });
    $(document).ready(function () {
        $('.tabs').tabs();
    });


    function initDatepickers() {
        var datepickers = document.getElementsByClassName("datepicker");
      
        for (var i = 0; i < datepickers.length; i++) {
          if (!datepickers[i].classList.contains("initialized")) {
            M.Datepicker.init(datepickers[i], {
              format: "yyyy-mm-dd",
              autoClose: true,
              showClearBtn: true,
              firstDay: 1,
              minDate: new Date(1969, 1, 12),
              maxDate: new Date(2043, 11, 31),
              i18n: {
                cancel: "Cancelar",
                clear: "Limpiar",
                done: "Listo",
                today: "Hoy",
                previousMonth: "Mes anterior",
                nextMonth: "Siguiente mes",
                months: [
                  "Enero",
                  "Febrero",
                  "Marzo",
                  "Abril",
                  "Mayo",
                  "Junio",
                  "Julio",
                  "Agosto",
                  "Septiembre",
                  "Octubre",
                  "Noviembre",
                  "Diciembre",
                ],
                monthsShort: [
                  "Ene",
                  "Feb",
                  "Mar",
                  "Abr",
                  "May",
                  "Jun",
                  "Jul",
                  "Ago",
                  "Sep",
                  "Oct",
                  "Nov",
                  "Dic",
                ],
                weekdays: [
                  "Domingo",
                  "Lunes",
                  "Martes",
                  "Miércoles",
                  "Jueves",
                  "Viernes",
                  "Sábado",
                ],
                weekdaysShort: ["Dom", "Lun", "Mar", "Mié", "Jue", "Vie", "Sáb"],
                weekdaysAbbrev: ["D", "L", "M", "M", "J", "V", "S"],
              },
              onClose: function () {
                setTimeout(function () {
                  // Tu código de validación y otras acciones aquí
                }, 1000);
              },
            });
      
            datepickers[i].classList.add("initialized");
          }
        }
      }
      
      // Llamar a la función initDatepickers inicialmente
      initDatepickers();
      
      // Verificar periódicamente si se han agregado nuevos elementos y luego inicializar los datepickers en esos elementos
      setInterval(function () {
        initDatepickers();
      }, 1000);
      
</script>





{% endblock Content %}

<!-- SECTION SCRIPTS -->
{% block scripts %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script src="{% static 'js/projects.js' %}"></script>

{% endblock scripts %}